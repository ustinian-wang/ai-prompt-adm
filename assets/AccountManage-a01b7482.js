import{n as i}from"./index-be2a32b1.js";import"./antd-9845fd40.js";import"./vendor-9a0f791b.js";const o={name:"AccountManage",data(){return{loading:!1,passwordLoading:!1,passwordModalVisible:!1,imageUrl:"",form:null,passwordForm:null}},beforeCreate(){this.form=this.$form.createForm(this),this.passwordForm=this.$form.createForm(this)},mounted(){this.loadUserData()},methods:{loadUserData(){this.form.setFieldsValue({username:"admin",email:"admin@example.com",realName:"管理员",phone:"13888888888"}),this.imageUrl="https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png"},beforeUpload(s){const e=s.type==="image/jpeg"||s.type==="image/png";e||this.$message.error("只能上传 JPG/PNG 格式的图片!");const a=s.size/1024/1024<2;return a||this.$message.error("图片大小不能超过 2MB!"),e&&a},handleChange(s){s.file.status!=="uploading"&&s.file.status==="done"&&(this.imageUrl=s.file.response.url,this.$message.success("头像上传成功!"))},async handleSubmit(){try{const s=await new Promise((e,a)=>{this.form.validateFields((t,r)=>{t?a(t):e(r)})});this.loading=!0,setTimeout(()=>{this.$message.success("个人信息保存成功!"),this.loading=!1},1e3)}catch{this.$message.error("保存失败，请检查输入信息!")}},handleReset(){this.form.resetFields(),this.loadUserData(),this.$message.info("已重置为原始数据")},showPasswordModal(){this.passwordModalVisible=!0,this.passwordForm.resetFields()},handlePasswordCancel(){this.passwordModalVisible=!1,this.passwordForm.resetFields()},async handlePasswordChange(){try{const s=await new Promise((e,a)=>{this.passwordForm.validateFields((t,r)=>{t?a(t):e(r)})});this.passwordLoading=!0,setTimeout(()=>{this.$message.success("密码修改成功!"),this.passwordLoading=!1,this.passwordModalVisible=!1,this.passwordForm.resetFields()},1e3)}catch{this.$message.error("密码修改失败，请检查输入信息!")}},compareToFirstPassword(s,e,a){const t=this.passwordForm;e&&e!==t.getFieldValue("newPassword")?a("两次输入的密码不一致!"):a()}}};var l=function(){var e=this,a=e._self._c;return a("div",{staticClass:"account-manage"},[e._m(0),a("div",{staticClass:"content-wrapper"},[a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{span:16}},[a("a-card",{staticClass:"info-card",attrs:{title:"个人信息",bordered:!1}},[a("a-form",{attrs:{form:e.form,layout:"vertical"}},[a("a-row",{attrs:{gutter:16}},[a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"用户名"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["username"],expression:"['username']"}],attrs:{placeholder:"请输入用户名",disabled:"",size:"large"}},[a("a-icon",{attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"邮箱"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["email"],expression:"['email']"}],attrs:{placeholder:"请输入邮箱",size:"large"}},[a("a-icon",{attrs:{slot:"prefix",type:"mail"},slot:"prefix"})],1)],1)],1)],1),a("a-row",{attrs:{gutter:16}},[a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"真实姓名"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["realName"],expression:"['realName']"}],attrs:{placeholder:"请输入真实姓名",size:"large"}},[a("a-icon",{attrs:{slot:"prefix",type:"idcard"},slot:"prefix"})],1)],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"手机号码"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["phone"],expression:"['phone']"}],attrs:{placeholder:"请输入手机号码",size:"large"}},[a("a-icon",{attrs:{slot:"prefix",type:"phone"},slot:"prefix"})],1)],1)],1)],1),a("a-form-item",{attrs:{label:"头像"}},[a("div",{staticClass:"avatar-section"},[a("a-upload",{staticClass:"avatar-uploader",attrs:{name:"avatar","list-type":"picture-card","show-upload-list":!1,action:"https://www.mocky.io/v2/5cc8019d300000980a055e76","before-upload":e.beforeUpload},on:{change:e.handleChange}},[e.imageUrl?a("div",{staticClass:"avatar-preview"},[a("img",{attrs:{src:e.imageUrl,alt:"avatar"}})]):a("div",{staticClass:"avatar-placeholder"},[a("a-icon",{attrs:{type:"plus"}}),a("div",{staticClass:"upload-text"},[e._v("上传头像")])],1)]),a("div",{staticClass:"avatar-info"},[a("p",[e._v("支持 JPG、PNG 格式，文件大小不超过 2MB")])])],1)]),a("a-form-item",[a("a-button",{attrs:{type:"primary",loading:e.loading,size:"large"},on:{click:e.handleSubmit}},[a("a-icon",{attrs:{type:"save"}}),e._v(" 保存修改 ")],1),a("a-button",{staticStyle:{"margin-left":"8px"},attrs:{size:"large"},on:{click:e.handleReset}},[a("a-icon",{attrs:{type:"reload"}}),e._v(" 重置 ")],1)],1)],1)],1)],1),a("a-col",{attrs:{span:8}},[a("a-card",{staticClass:"security-card",attrs:{title:"账户安全",bordered:!1}},[a("div",{staticClass:"security-items"},[a("div",{staticClass:"security-item"},[a("div",{staticClass:"security-icon"},[a("a-icon",{attrs:{type:"lock"}})],1),a("div",{staticClass:"security-content"},[a("h4",[e._v("登录密码")]),a("p",[e._v("建议定期更换密码，确保账户安全")]),a("a-button",{attrs:{type:"link"},on:{click:e.showPasswordModal}},[e._v(" 修改密码 ")])],1)]),a("div",{staticClass:"security-item"},[a("div",{staticClass:"security-icon"},[a("a-icon",{attrs:{type:"mobile"}})],1),a("div",{staticClass:"security-content"},[a("h4",[e._v("手机验证")]),a("p",[e._v("已绑定手机：138****8888")]),a("a-button",{attrs:{type:"link"}},[e._v(" 更换手机 ")])],1)]),a("div",{staticClass:"security-item"},[a("div",{staticClass:"security-icon"},[a("a-icon",{attrs:{type:"mail"}})],1),a("div",{staticClass:"security-content"},[a("h4",[e._v("邮箱验证")]),a("p",[e._v("已绑定邮箱：user@example.com")]),a("a-button",{attrs:{type:"link"}},[e._v(" 更换邮箱 ")])],1)])])])],1)],1)],1),a("a-modal",{attrs:{title:"修改密码","confirm-loading":e.passwordLoading,width:500},on:{ok:e.handlePasswordChange,cancel:e.handlePasswordCancel},model:{value:e.passwordModalVisible,callback:function(t){e.passwordModalVisible=t},expression:"passwordModalVisible"}},[a("a-form",{attrs:{form:e.passwordForm,layout:"vertical"}},[a("a-form-item",{attrs:{label:"当前密码"}},[a("a-input-password",{directives:[{name:"decorator",rawName:"v-decorator",value:["currentPassword",{rules:[{required:!0,message:"请输入当前密码!"}]}],expression:`[
            'currentPassword',
            { rules: [{ required: true, message: '请输入当前密码!' }] }
          ]`}],attrs:{placeholder:"请输入当前密码",size:"large"}},[a("a-icon",{attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1),a("a-form-item",{attrs:{label:"新密码"}},[a("a-input-password",{directives:[{name:"decorator",rawName:"v-decorator",value:["newPassword",{rules:[{required:!0,message:"请输入新密码!"}]}],expression:`[
            'newPassword',
            { rules: [{ required: true, message: '请输入新密码!' }] }
          ]`}],attrs:{placeholder:"请输入新密码",size:"large"}},[a("a-icon",{attrs:{slot:"prefix",type:"key"},slot:"prefix"})],1)],1),a("a-form-item",{attrs:{label:"确认新密码"}},[a("a-input-password",{directives:[{name:"decorator",rawName:"v-decorator",value:["confirmPassword",{rules:[{required:!0,message:"请确认新密码!"},{validator:this.compareToFirstPassword}]}],expression:`[
            'confirmPassword',
            { 
              rules: [
                { required: true, message: '请确认新密码!' },
                { validator: this.compareToFirstPassword }
              ] 
            }
          ]`}],attrs:{placeholder:"请确认新密码",size:"large"}},[a("a-icon",{attrs:{slot:"prefix",type:"key"},slot:"prefix"})],1)],1)],1)],1)],1)},n=[function(){var s=this,e=s._self._c;return e("div",{staticClass:"page-header"},[e("h1",[s._v("账号管理")]),e("p",[s._v("管理您的个人信息和账户安全")])])}],d=i(o,l,n,!1,null,"4d74bbce",null,null);const u=d.exports;export{u as default};
