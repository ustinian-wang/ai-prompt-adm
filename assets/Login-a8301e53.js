import{m as o}from"./vendor-9a0f791b.js";import{r as l,n}from"./index-be2a32b1.js";import"./antd-9845fd40.js";const m={name:"Login",data(){return{loading:!1,registerVisible:!1,registerLoading:!1,registerForm:{username:"",email:"",password:"",confirmPassword:""}}},beforeCreate(){this.form=this.$form.createForm(this)},methods:{...o("auth",["login"]),async loginProcess(t){await this.login(t),this.$message.success("登录成功"),this.$router.push("/")},async handleSubmit(t){t.preventDefault(),this.loading=!0;try{const s=await new Promise((e,r)=>{this.form.validateFields((a,i)=>{a?r(a):e(i)})});await this.loginProcess(s)}catch(s){this.$message.error(s.message||"登录失败")}finally{this.loading=!1}},showRegister(){this.registerVisible=!0},async handleRegister(){try{this.registerLoading=!0,alert(JSON.stringify(this.registerForm));let t=await l(this.registerForm);t.data.success?(this.$message.success("注册成功"),this.registerVisible=!1,await this.loginProcess({username:this.registerForm.username,password:this.registerForm.password})):this.$message.error(t.data.msg)}catch(t){this.$message.error(t.message||"注册失败")}finally{this.registerLoading=!1}},compareToFirstPassword(t,s,e){const r=this.registerForm;s&&s!==r.getFieldValue("password")?e("两次输入的密码不一致!"):e()}}};var c=function(){var s=this,e=s._self._c;return e("div",{staticClass:"login-container"},[s._m(0),e("div",{staticClass:"login-content"},[e("div",{staticClass:"login-box"},[e("div",{staticClass:"login-header"},[e("div",{staticClass:"logo"},[e("a-icon",{staticClass:"logo-icon",attrs:{type:"robot"}}),e("h1",[s._v("AI提示词管理系统")])],1),e("p",{staticClass:"subtitle"},[s._v("智能管理，高效创作")])]),e("a-form",{staticClass:"login-form",attrs:{form:s.form},on:{submit:s.handleSubmit}},[e("a-form-item",[e("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["username",{rules:[{required:!0,message:"请输入用户名!"}],validateTrigger:"blur"}],expression:`[
              'username',
              {
                rules: [{ required: true, message: '请输入用户名!' }],
                validateTrigger: 'blur'
              }
            ]`}],staticClass:"custom-input",attrs:{size:"large",placeholder:"用户名"}},[e("a-icon",{staticClass:"input-icon",attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1),e("a-form-item",[e("a-input-password",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{rules:[{required:!0,message:"请输入密码!"}],validateTrigger:"blur"}],expression:`[
              'password',
              {
                rules: [{ required: true, message: '请输入密码!' }],
                validateTrigger: 'blur'
              }
            ]`}],staticClass:"custom-input",attrs:{size:"large",placeholder:"密码"}},[e("a-icon",{staticClass:"input-icon",attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1),e("a-form-item",{staticClass:"form-options"},[e("a-checkbox",{directives:[{name:"decorator",rawName:"v-decorator",value:["remember",{valuePropName:"checked",initialValue:!0}],expression:`[
              'remember',
              {
                valuePropName: 'checked',
                initialValue: true
              }
            ]`}]},[s._v(" 记住我 ")]),e("a",{staticClass:"login-form-forgot",attrs:{href:""}},[s._v(" 忘记密码? ")])],1),e("a-form-item",[e("a-button",{staticClass:"login-form-button",attrs:{type:"primary","html-type":"submit",size:"large",loading:s.loading}},[e("a-icon",{attrs:{type:"login"}}),s._v(" 登录 ")],1)],1),e("div",{staticClass:"login-options"},[e("a-button",{staticClass:"register-btn",attrs:{type:"link"},on:{click:s.showRegister}},[e("a-icon",{attrs:{type:"user-add"}}),s._v(" 还没有账号？立即注册 ")],1)],1)],1)],1)]),e("a-modal",{staticClass:"register-modal",attrs:{title:"用户注册",confirmLoading:s.registerLoading,width:500},on:{ok:s.handleRegister},model:{value:s.registerVisible,callback:function(r){s.registerVisible=r},expression:"registerVisible"}},[e("a-form",{attrs:{form:s.registerForm,layout:"vertical"}},[e("a-form-item",{attrs:{label:"用户名"}},[e("a-input",{attrs:{placeholder:"请输入用户名",size:"large"},model:{value:s.registerForm.username,callback:function(r){s.$set(s.registerForm,"username",r)},expression:"registerForm.username"}},[e("a-icon",{attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1),e("a-form-item",{attrs:{label:"邮箱"}},[e("a-input",{attrs:{placeholder:"请输入邮箱",size:"large"},model:{value:s.registerForm.email,callback:function(r){s.$set(s.registerForm,"email",r)},expression:"registerForm.email"}},[e("a-icon",{attrs:{slot:"prefix",type:"mail"},slot:"prefix"})],1)],1),e("a-form-item",{attrs:{label:"密码"}},[e("a-input-password",{attrs:{placeholder:"请输入密码",size:"large"},model:{value:s.registerForm.password,callback:function(r){s.$set(s.registerForm,"password",r)},expression:"registerForm.password"}},[e("a-icon",{attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1),e("a-form-item",{attrs:{label:"确认密码"}},[e("a-input-password",{attrs:{placeholder:"请确认密码",size:"large"},model:{value:s.registerForm.confirmPassword,callback:function(r){s.$set(s.registerForm,"confirmPassword",r)},expression:"registerForm.confirmPassword"}},[e("a-icon",{attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1)],1)],1)],1)},g=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"login-background"},[s("div",{staticClass:"background-shapes"},[s("div",{staticClass:"shape shape-1"}),s("div",{staticClass:"shape shape-2"}),s("div",{staticClass:"shape shape-3"})])])}],d=n(m,c,g,!1,null,"8f373733",null,null);const h=d.exports;export{h as default};
