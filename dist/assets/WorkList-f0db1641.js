import{b as i,m as l}from"./vendor-9a0f791b.js";import{n}from"./index-7809c99c.js";import"./antd-9085d354.js";const d={name:"WorkList",data(){return{modalVisible:!1,isEdit:!1,submitLoading:!1,workForm:{title:"",description:"",category:"",tags:[]},workRules:{title:[{required:!0,message:"请输入作品标题",trigger:"blur"}],description:[{required:!0,message:"请输入作品描述",trigger:"blur"}],category:[{required:!0,message:"请选择所属分类",trigger:"change"}]}}},computed:{...i("works",["worksList","loading","pagination"]),columns(){return[{title:"作品标题",dataIndex:"title",key:"title",width:200},{title:"描述",dataIndex:"description",key:"description",ellipsis:!0},{title:"分类",dataIndex:"category",key:"category",width:100},{title:"状态",dataIndex:"status",key:"status",width:100,scopedSlots:{customRender:"status"}},{title:"作者",dataIndex:"author",key:"author",width:100},{title:"标签",dataIndex:"tags",key:"tags",width:200,scopedSlots:{customRender:"tags"}},{title:"创建时间",dataIndex:"createdAt",key:"createdAt",width:150},{title:"操作",key:"action",width:300,scopedSlots:{customRender:"action"}}]}},mounted(){this.getWorksList()},methods:{...l("works",["getWorksList","createWork","updateWork","deleteWork"]),getStatusColor(s){return{draft:"#faad14",published:"#52c41a",archived:"#d9d9d9"}[s]||"#d9d9d9"},getStatusText(s){return{draft:"草稿",published:"已发布",archived:"已归档"}[s]||"未知"},showCreateModal(){this.isEdit=!1,this.workForm={title:"",description:"",category:"",tags:[]},this.modalVisible=!0},editWork(s){this.isEdit=!0,this.workForm={id:s.id,title:s.title,description:s.description,category:s.category,tags:[...s.tags]},this.modalVisible=!0},viewWork(s){this.$message.info(`查看作品: ${s.title}`)},configurePrompt(s){this.$message.info(`配置提示词: ${s.title}`)},async handleSubmit(){try{await this.$refs.workForm.validate(),this.submitLoading=!0,this.isEdit?(await this.updateWork(this.workForm),this.$message.success("更新作品成功")):(await this.createWork(this.workForm),this.$message.success("创建作品成功")),this.modalVisible=!1,this.getWorksList()}catch(s){console.error("提交失败:",s)}finally{this.submitLoading=!1}},handleCancel(){this.modalVisible=!1,this.$refs.workForm.resetFields()},async deleteWork(s){try{await this.deleteWork(s),this.$message.success("删除作品成功"),this.getWorksList()}catch{this.$message.error("删除失败")}}}};var c=function(){var t=this,e=t._self._c;return e("div",{staticClass:"work-list"},[e("div",{staticClass:"page-header"},[e("h2",[t._v("作品列表")]),e("a-button",{attrs:{type:"primary"},on:{click:t.showCreateModal}},[e("a-icon",{attrs:{type:"plus"}}),t._v(" 新建作品 ")],1)],1),e("a-table",{attrs:{columns:t.columns,"data-source":t.worksList,loading:t.loading,pagination:t.pagination,"row-key":"id"},scopedSlots:t._u([{key:"status",fn:function(a){return[e("a-tag",{attrs:{color:t.getStatusColor(a)}},[t._v(t._s(t.getStatusText(a)))])]}},{key:"tags",fn:function(a){return t._l(a,function(r){return e("a-tag",{key:r,attrs:{color:"blue"}},[t._v(t._s(r))])})}},{key:"action",fn:function(a,r){return[e("a-button",{attrs:{type:"link"},on:{click:function(o){return t.viewWork(r)}}},[t._v("查看")]),e("a-button",{attrs:{type:"link"},on:{click:function(o){return t.editWork(r)}}},[t._v("编辑")]),e("a-button",{attrs:{type:"link"},on:{click:function(o){return t.configurePrompt(r)}}},[t._v("配置提示词")]),e("a-popconfirm",{attrs:{title:"确定要删除这个作品吗？"},on:{confirm:function(o){return t.deleteWork(r.id)}}},[e("a-button",{staticStyle:{color:"#ff4d4f"},attrs:{type:"link"}},[t._v("删除")])],1)]}}])}),e("a-modal",{attrs:{title:t.isEdit?"编辑作品":"新建作品",visible:t.modalVisible,"confirm-loading":t.submitLoading},on:{ok:t.handleSubmit,cancel:t.handleCancel}},[e("a-form-model",{ref:"workForm",attrs:{model:t.workForm,rules:t.workRules,"label-col":{span:6},"wrapper-col":{span:16}}},[e("a-form-model-item",{attrs:{label:"作品标题",prop:"title"}},[e("a-input",{attrs:{placeholder:"请输入作品标题"},model:{value:t.workForm.title,callback:function(a){t.$set(t.workForm,"title",a)},expression:"workForm.title"}})],1),e("a-form-model-item",{attrs:{label:"作品描述",prop:"description"}},[e("a-textarea",{attrs:{rows:4,placeholder:"请输入作品描述"},model:{value:t.workForm.description,callback:function(a){t.$set(t.workForm,"description",a)},expression:"workForm.description"}})],1),e("a-form-model-item",{attrs:{label:"所属分类",prop:"category"}},[e("a-select",{attrs:{placeholder:"请选择分类"},model:{value:t.workForm.category,callback:function(a){t.$set(t.workForm,"category",a)},expression:"workForm.category"}},[e("a-select-option",{attrs:{value:"AI写作"}},[t._v("AI写作")]),e("a-select-option",{attrs:{value:"AI绘画"}},[t._v("AI绘画")]),e("a-select-option",{attrs:{value:"AI编程"}},[t._v("AI编程")]),e("a-select-option",{attrs:{value:"AI分析"}},[t._v("AI分析")]),e("a-select-option",{attrs:{value:"AI应用"}},[t._v("AI应用")])],1)],1),e("a-form-model-item",{attrs:{label:"标签"}},[e("a-select",{staticStyle:{width:"100%"},attrs:{mode:"tags",placeholder:"请输入标签，按回车确认"},model:{value:t.workForm.tags,callback:function(a){t.$set(t.workForm,"tags",a)},expression:"workForm.tags"}})],1)],1)],1)],1)},u=[],m=n(d,c,u,!1,null,"dd60e688",null,null);const h=m.exports;export{h as default};
