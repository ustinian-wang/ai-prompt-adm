import{n as s}from"./index-b307a8f6.js";import"./antd-9085d354.js";import"./vendor-9a0f791b.js";const t={name:"AccountManage",data(){return{loading:!1,passwordLoading:!1,imageUrl:""}},beforeCreate(){this.form=this.$form.createForm(this),this.passwordForm=this.$form.createForm(this)},mounted(){this.loadUserInfo()},methods:{loadUserInfo(){this.form.setFieldsValue({username:"admin",email:"admin@example.com"})},handleSubmit(){this.form.validateFields((r,a)=>{r||(this.loading=!0,setTimeout(()=>{this.$message.success("个人信息保存成功！"),this.loading=!1},1e3))})},handlePasswordChange(){this.passwordForm.validateFields((r,a)=>{if(!r){if(a.newPassword!==a.confirmPassword){this.$message.error("两次输入的新密码不一致！");return}this.passwordLoading=!0,setTimeout(()=>{this.$message.success("密码修改成功！"),this.passwordLoading=!1,this.passwordForm.resetFields()},1e3)}})},beforeUpload(r){const a=r.type==="image/jpeg"||r.type==="image/png";a||this.$message.error("只能上传JPG/PNG格式的图片!");const e=r.size/1024/1024<2;return e||this.$message.error("图片大小不能超过2MB!"),a&&e},handleChange(r){r.file.status==="done"&&(this.imageUrl=r.file.response.url,this.$message.success("头像上传成功！"))}}};var o=function(){var a=this,e=a._self._c;return e("div",{staticClass:"account-manage"},[e("h2",[a._v("账号管理")]),e("a-card",{staticClass:"info-card",attrs:{title:"个人信息"}},[e("a-form",{attrs:{form:a.form,layout:"vertical"}},[e("a-row",{attrs:{gutter:16}},[e("a-col",{attrs:{span:12}},[e("a-form-item",{attrs:{label:"用户名"}},[e("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["username"],expression:"['username']"}],attrs:{placeholder:"请输入用户名",disabled:""}})],1)],1),e("a-col",{attrs:{span:12}},[e("a-form-item",{attrs:{label:"邮箱"}},[e("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["email"],expression:"['email']"}],attrs:{placeholder:"请输入邮箱"}})],1)],1)],1),e("a-form-item",{attrs:{label:"头像"}},[e("a-upload",{staticClass:"avatar-uploader",attrs:{name:"avatar","list-type":"picture-card","show-upload-list":!1,action:"https://www.mocky.io/v2/5cc8019d300000980a055e76","before-upload":a.beforeUpload},on:{change:a.handleChange}},[a.imageUrl?e("img",{attrs:{src:a.imageUrl,alt:"avatar"}}):e("div",[e("a-icon",{attrs:{type:"plus"}}),e("div",{staticClass:"ant-upload-text"},[a._v("上传")])],1)])],1),e("a-form-item",[e("a-button",{attrs:{type:"primary",loading:a.loading},on:{click:a.handleSubmit}},[a._v(" 保存修改 ")])],1)],1)],1),e("a-card",{staticClass:"password-card",attrs:{title:"修改密码"}},[e("a-form",{attrs:{form:a.passwordForm,layout:"vertical"}},[e("a-form-item",{attrs:{label:"当前密码"}},[e("a-input-password",{directives:[{name:"decorator",rawName:"v-decorator",value:["currentPassword",{rules:[{required:!0,message:"请输入当前密码!"}]}],expression:`[
            'currentPassword',
            { rules: [{ required: true, message: '请输入当前密码!' }] }
          ]`}],attrs:{placeholder:"请输入当前密码"}})],1),e("a-form-item",{attrs:{label:"新密码"}},[e("a-input-password",{directives:[{name:"decorator",rawName:"v-decorator",value:["newPassword",{rules:[{required:!0,message:"请输入新密码!"}]}],expression:`[
            'newPassword',
            { rules: [{ required: true, message: '请输入新密码!' }] }
          ]`}],attrs:{placeholder:"请输入新密码"}})],1),e("a-form-item",{attrs:{label:"确认新密码"}},[e("a-input-password",{directives:[{name:"decorator",rawName:"v-decorator",value:["confirmPassword",{rules:[{required:!0,message:"请确认新密码!"}]}],expression:`[
            'confirmPassword',
            { rules: [{ required: true, message: '请确认新密码!' }] }
          ]`}],attrs:{placeholder:"请确认新密码"}})],1),e("a-form-item",[e("a-button",{attrs:{type:"primary",loading:a.passwordLoading},on:{click:a.handlePasswordChange}},[a._v(" 修改密码 ")])],1)],1)],1)],1)},i=[],n=s(t,o,i,!1,null,"9bf07935",null,null);const c=n.exports;export{c as default};
