import{b as m,m as _}from"./vendor-9a0f791b.js";import{n as y}from"./index-bea0c6d7.js";import"./antd-da94fbad.js";const g={name:"Layout",data(){return{collapsed:!1,selectedKeys:[],openKeys:[]}},computed:{...m("user",["userAvatar","userName"]),menuRoutes(){return this.$router.options.routes.filter(a=>a.path!=="/login"&&a.path!=="/")}},watch:{$route:{handler(a){this.updateSelectedKeys(a)},immediate:!0}},methods:{..._("user",["logout"]),toggleCollapsed(){this.collapsed=!this.collapsed},handleMenuClick({key:a}){this.$route.path!==a&&this.$router.push(a)},handleOpenChange(a){this.openKeys=a},updateSelectedKeys(a){this.selectedKeys=[a.path];const e=a.matched;e.length>1&&(this.openKeys=e.slice(1).map(t=>t.path))},getRouteIcon(a){var e;return((e=a.meta)==null?void 0:e.icon)||"file"},async handleLogout(){try{await this.logout(),this.$message.success("退出成功"),this.$router.push("/login")}catch{this.$message.error("退出失败")}}}};var v=function(){var e=this,t=e._self._c;return t("a-layout",{staticClass:"layout"},[t("a-layout-sider",{staticClass:"sidebar",attrs:{trigger:null,collapsible:""},model:{value:e.collapsed,callback:function(s){e.collapsed=s},expression:"collapsed"}},[t("div",{staticClass:"logo"},[e.collapsed?t("h2",[e._v("AI")]):t("h2",[e._v("AI提示词管理")])]),t("a-menu",{attrs:{theme:"dark",mode:"inline",selectedKeys:e.selectedKeys,openKeys:e.openKeys},on:{click:e.handleMenuClick,openChange:e.handleOpenChange}},[e._l(e.menuRoutes,function(s){var l,o,i,c,r,d,p;return[s.children&&s.children.length>1?t("a-sub-menu",{key:s.path},[t("span",{attrs:{slot:"title"},slot:"title"},[t("a-icon",{attrs:{type:((l=s.meta)==null?void 0:l.icon)||"file"}}),t("span",[e._v(e._s(((o=s.meta)==null?void 0:o.title)||"未命名"))])],1),e._l(s.children,function(n){var h,u;return(h=n.meta)!=null&&h.hidden?e._e():t("a-menu-item",{key:n.path},[t("a-icon",{attrs:{type:e.getRouteIcon(n)}}),t("span",[e._v(e._s(((u=n.meta)==null?void 0:u.title)||"未命名"))])],1)})],2):e._e(),s.children&&s.children.length===1&&!((i=s.children[0].meta)!=null&&i.hidden)?t("a-menu-item",{key:s.children[0].path},[t("a-icon",{attrs:{type:((c=s.children[0].meta)==null?void 0:c.icon)||((r=s.meta)==null?void 0:r.icon)||"file"}}),t("span",[e._v(e._s(((d=s.children[0].meta)==null?void 0:d.title)||((p=s.meta)==null?void 0:p.title)||"未命名"))])],1):e._e()]})],2)],1),t("a-layout",[t("a-layout-header",{staticClass:"header"},[t("a-icon",{staticClass:"trigger",attrs:{type:e.collapsed?"menu-unfold":"menu-fold"},on:{click:e.toggleCollapsed}}),t("div",{staticClass:"header-right"},[t("a-dropdown",[t("a",{staticClass:"user-dropdown"},[t("a-avatar",{attrs:{src:e.userAvatar}}),t("span",{staticClass:"username"},[e._v(e._s(e.userName))]),t("a-icon",{attrs:{type:"down"}})],1),t("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[t("a-menu-item",{on:{click:e.handleLogout}},[t("a-icon",{attrs:{type:"logout"}}),e._v(" 退出登录 ")],1)],1)],1)],1)],1),t("a-layout-content",{staticClass:"content"},[t("router-view")],1)],1)],1)},f=[],C=y(g,v,f,!1,null,"eb96708c",null,null);const $=C.exports;export{$ as default};
