import{b as l,m as o}from"./vendor-9a0f791b.js";import{n as i}from"./index-d6922ee5.js";import"./antd-9085d354.js";const r={name:"Layout",data(){return{collapsed:!1,selectedKeys:[],openKeys:[]}},computed:{...l("user",["userAvatar","userName"]),menuRoutes(){return this.$router.options.routes.filter(s=>s.path!=="/login"&&s.path!=="/")}},watch:{$route:{handler(s){this.updateSelectedKeys(s)},immediate:!0}},methods:{...o("user",["logout"]),toggleCollapsed(){this.collapsed=!this.collapsed},handleMenuClick({key:s}){this.$router.push(s)},handleOpenChange(s){this.openKeys=s},updateSelectedKeys(s){this.selectedKeys=[s.path];const e=s.matched;e.length>1&&(this.openKeys=e.slice(1).map(t=>t.path))},async handleLogout(){try{await this.logout(),this.$message.success("退出成功"),this.$router.push("/login")}catch{this.$message.error("退出失败")}}}};var c=function(){var e=this,t=e._self._c;return t("a-layout",{staticClass:"layout"},[t("a-layout-sider",{staticClass:"sidebar",attrs:{trigger:null,collapsible:""},model:{value:e.collapsed,callback:function(a){e.collapsed=a},expression:"collapsed"}},[t("div",{staticClass:"logo"},[e.collapsed?t("h2",[e._v("AI")]):t("h2",[e._v("AI提示词管理")])]),t("a-menu",{attrs:{theme:"dark",mode:"inline",selectedKeys:e.selectedKeys,openKeys:e.openKeys},on:{click:e.handleMenuClick,openChange:e.handleOpenChange}},[e._l(e.menuRoutes,function(a){return[a.children&&a.children.length>1?t("a-sub-menu",{key:a.path},[t("span",{attrs:{slot:"title"},slot:"title"},[t("a-icon",{attrs:{type:a.meta.icon}}),t("span",[e._v(e._s(a.meta.title))])],1),e._l(a.children,function(n){return n.meta.hidden?e._e():t("a-menu-item",{key:n.path},[t("a-icon",{attrs:{type:n.meta.icon||"file"}}),t("span",[e._v(e._s(n.meta.title))])],1)})],2):e._e(),a.children[0].meta.hidden?e._e():t("a-menu-item",{directives:[{name:"else-if",rawName:"v-else-if",value:a.children&&a.children.length===1,expression:"route.children && route.children.length === 1"}],key:a.children[0].path},[t("a-icon",{attrs:{type:a.children[0].meta.icon||a.meta.icon}}),t("span",[e._v(e._s(a.children[0].meta.title))])],1)]})],2)],1),t("a-layout",[t("a-layout-header",{staticClass:"header"},[t("a-icon",{staticClass:"trigger",attrs:{type:e.collapsed?"menu-unfold":"menu-fold"},on:{click:e.toggleCollapsed}}),t("div",{staticClass:"header-right"},[t("a-dropdown",[t("a",{staticClass:"user-dropdown"},[t("a-avatar",{attrs:{src:e.userAvatar}}),t("span",{staticClass:"username"},[e._v(e._s(e.userName))]),t("a-icon",{attrs:{type:"down"}})],1),t("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[t("a-menu-item",{on:{click:e.handleLogout}},[t("a-icon",{attrs:{type:"logout"}}),e._v(" 退出登录 ")],1)],1)],1)],1)],1),t("a-layout-content",{staticClass:"content"},[t("router-view")],1)],1)],1)},d=[],p=i(r,c,d,!1,null,"462e15b8",null,null);const _=p.exports;export{_ as default};
