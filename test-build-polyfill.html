<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>构建后 Polyfill 测试页面</title>
</head>
<body>
    <h1>构建后 Polyfill 测试页面</h1>
    <div id="test-output"></div>
    
    <script>
        console.log('测试开始...');
        
        // 测试所有必要的全局对象是否存在
        const tests = [
            { name: 'MutationObserver', value: window.MutationObserver },
            { name: 'enquire', value: window.enquire },
            { name: 'ResizeObserver', value: window.ResizeObserver },
            { name: 'vcSlick', value: window.vcSlick },
            { name: 'util', value: window.util },
            { name: 'events', value: window.events },
            { name: 'global', value: window.global },
            { name: 'process', value: window.process }
        ];
        
        let testResults = [];
        
        tests.forEach(test => {
            if (test.value) {
                console.log(`✅ ${test.name}: 存在`, test.value);
                testResults.push(`✅ ${test.name}: 存在`);
            } else {
                console.log(`❌ ${test.name}: 不存在`);
                testResults.push(`❌ ${test.name}: 不存在`);
            }
        });
        
        // 测试 require 函数是否被正确替换
        try {
            // 模拟 ant-design-vue 中的 require 调用
            const mutationObserver = window.MutationObserver;
            const enquire = window.enquire;
            const vcSlick = window.vcSlick;
            
            if (mutationObserver && enquire && vcSlick) {
                console.log('✅ 所有必要的模块都可以通过全局对象访问');
                testResults.push('✅ 所有必要的模块都可以通过全局对象访问');
            } else {
                console.log('❌ 部分模块无法通过全局对象访问');
                testResults.push('❌ 部分模块无法通过全局对象访问');
            }
        } catch (error) {
            console.error('❌ 测试失败:', error);
            testResults.push(`❌ 测试失败: ${error.message}`);
        }
        
        // 显示测试结果
        document.getElementById('test-output').innerHTML = 
            '<h3>测试结果:</h3>' + 
            testResults.map(result => `<p>${result}</p>`).join('');
    </script>
</body>
</html>
